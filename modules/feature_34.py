# Feature 34.py implementation here

import streamlit as st
import folium
from streamlit_folium import st_folium

def app():
    st.header("ЁЯУб ржЬрж┐ржУ-ржлрзЗржирзНрж╕рж┐ржВ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ")

    st.markdown("""
    ржиржжрзАрж░ рж╕ржВрж░ржХрзНрж╖рж┐ржд ржПрж▓рж╛ржХрж╛ (ржЬрж┐ржУ-ржлрзЗржирзНрж╕) ржмрж╛ржЗрж░рзЗ ржХрзЛржи ржЕржиржирзБржорзЛржжрж┐ржд ржХрж╛рж░рзНржпржХрж▓рж╛ржк рж╕ржирж╛ржХрзНржд рж╣рж▓рзЗ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ ржкрзНрж░ржжрж╛ржи ржХрж░ржмрзЗред
    """)

    # ржбрзЗржорзЛ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзЗржирзНржЯрж╛рж░ ржкржпрж╝рзЗржирзНржЯ ржПржмржВ рж░рзЗржбрж┐ржпрж╝рж╛рж╕
    center = [23.8103, 90.4125]  # ржврж╛ржХрж╛ рж╢рж╣рж░рзЗрж░ ржХрзЛржЕрж░рзНржбрж┐ржирзЗржЯ
    radius = 5000  # ржорж┐ржЯрж╛рж░

    m = folium.Map(location=center, zoom_start=12)

    # ржЬрж┐ржУ-ржлрзЗржирзНрж╕ ржПрж▓рж╛ржХрж╛ (рж╕рж╛рж░рзНржХрзЗрж▓)
    folium.Circle(
        location=center,
        radius=radius,
        color='blue',
        fill=True,
        fill_opacity=0.1,
        popup="ржирж┐рж░рж╛ржкржж ржиржжрзА ржПрж▓рж╛ржХрж╛"
    ).add_to(m)

    # ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ рж▓рзЛржХрзЗрж╢ржи рж╕рж┐ржорзБрж▓рзЗрж╢ржи (ржбрзЗржорзЛрждрзЗ ржлрж┐ржХрзНрж╕ржб ржкржпрж╝рзЗржирзНржЯ)
    user_location = [23.8150, 90.4200]

    folium.Marker(
        location=user_location,
        popup="ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржЕржмрж╕рзНржерж╛ржи",
        icon=folium.Icon(color='red')
    ).add_to(m)

    st_folium(m, width=700, height=500)

    # ржЬрж┐ржУ-ржлрзЗржирзНрж╕рж┐ржВ ржЪрзЗржХ (ржбрзЗржорзЛ рж▓ржЬрж┐ржХ)
    from geopy.distance import geodesic

    distance = geodesic(center, user_location).meters

    st.write(f"ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржиржжрзА ржерзЗржХрзЗ ржжрзВрж░рждрзНржм: {distance:.2f} ржорж┐ржЯрж╛рж░")

    if distance > radius:
        st.error("тЪая╕П рж╕рждрж░рзНржХрждрж╛: ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржирж┐рж░рж╛ржкржж ржПрж▓рж╛ржХрж╛ ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗ!")
    else:
        st.success("тЬЕ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржирж┐рж░рж╛ржкржж ржЬрж┐ржУ-ржлрзЗржирзНрж╕рж┐ржВ ржПрж░ ржоржзрзНржпрзЗ ржЖржЫрзЗред")
