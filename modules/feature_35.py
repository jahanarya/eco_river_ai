# Feature 35.py implementation here

import streamlit as st
import pandas as pd
import json

def app():
    st.header("ЁЯМР ржУржкрзЗржи ржбрзЗржЯрж╛ ржПржкрж┐ржЖржЗ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ")

    st.markdown("""
    ржиржжрзА ржУ ржкрж░рж┐ржмрзЗрж╢ рж╕ржВржХрзНрж░рж╛ржирзНржд рждржерзНржпржЧрзБрж▓рзЛржХрзЗ ржУржкрзЗржи ржбрзЗржЯрж╛ ржлрж░ржорзНржпрж╛ржЯрзЗ (CSV, JSON) ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржХрж░рзЗ ржкрзНрж░ржжрж╛ржи ржХрж░ржмрзЗ,
    ржпрж╛рждрзЗ ржЕржирзНржп ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржмрж╛ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржорзЗ рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред
    """)

    # ржбрзЗржорзЛ ржбрзЗржЯрж╛рж╕рзЗржЯ (ржиржжрзАрж░ ржХрж┐ржЫрзБ рждржерзНржп)
    data = {
        "ржиржжрзА": ["ржорзЗржШржирж╛", "рждрж┐рждрж╛рж╕", "ржкржжрзНржорж╛", "ржпржорзБржирж╛"],
        "ржжрзИрж░рзНржШрзНржп (ржХрж┐ржорж┐)": [120, 98, 240, 150],
        "ржкрзНрж░ржмрж╛рж╣рзЗрж░ рж╣рж╛рж░ (ржХрж┐ржЙржмрж┐ржХ ржорж┐ржЯрж╛рж░/рж╕рзЗржХрзЗржирзНржб)": [5000, 3200, 7000, 4500],
        "ржжрзВрж╖ржг ржорж╛рждрзНрж░рж╛": ["ржорж╛ржЭрж╛рж░рж┐", "ржирж┐ржорзНржи", "ржЙржЪрзНржЪ", "ржорж╛ржЭрж╛рж░рж┐"],
    }

    df = pd.DataFrame(data)

    st.subheader("ржиржжрзАрж░ ржбрзЗржЯрж╛рж╕рзЗржЯ")

    st.dataframe(df)

    st.markdown("**ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржлрж░ржорзНржпрж╛ржЯ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи:**")
    export_format = st.selectbox("", ["CSV", "JSON"])

    if st.button("ржбрж╛ржЙржирж▓рзЛржб ржкрзНрж░рж╕рзНрждрзБржд ржХрж░рзБржи"):
        if export_format == "CSV":
            csv = df.to_csv(index=False).encode('utf-8')
            st.download_button(
                label="CSV ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи",
                data=csv,
                file_name="river_data.csv",
                mime='text/csv',
            )
        else:
            json_str = df.to_json(orient='records', force_ascii=False)
            st.download_button(
                label="JSON ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи",
                data=json_str,
                file_name="river_data.json",
                mime='application/json',
            )


